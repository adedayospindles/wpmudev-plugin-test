(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n;const n=function(e){var n=e.children;try{return n}catch(e){return console.error("DriveApp error boundary caught:",e),React.createElement("div",{className:"sui-box sui-box-error"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Something went wrong","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-body"},React.createElement("p",null,(0,t.__)("An unexpected error occurred in the Google Drive interface. Please refresh the page or try again later.","wpmudev-plugin-test"))))}},r=window.wp.components;const o=function(e){var t=e.notice,n=e.onDismiss;return null!=t&&t.message?React.createElement(r.Notice,{status:"error"===t.status?"error":"success",isDismissible:!0,onRemove:n},t.message):null};function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return i(s,"_invoke",function(n,r,o){var a,i,c,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,i=0,c=e,p.n=n,u}};function d(n,r){for(i=n,c=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];n>3?(o=m===r)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=n<2&&d<a[1])?(i=0,p.v=r,p.n=a[1]):d<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,i=0))}if(o||n>1)return u;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),i=s,c=m;(t=i<2?e:c)||!f;){a||(i?i<3?(i>1&&(p.n=-1),d(i,c)):p.n=c:p.v=c);try{if(l=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=p.n<0)?c:n.call(r,p))!==u)break}catch(t){a=e,i=1,c=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),s}var u={};function l(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(i(t={},r,function(){return this}),t),d=f.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,i(d,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,o,"GeneratorFunction"),i(d),i(d,o,"Generator"),i(d,r,function(){return this}),i(d,"toString",function(){return"[object Generator]"}),(a=function(){return{w:c,m}})()}function i(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,t,n,r){function a(t,n){i(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},i(e,t,n,r)}function c(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var u=function(){var e,t=(e=a().m(function e(t){var n,r,o,i=arguments;return a().w(function(e){for(;;)switch(e.n){case 0:return(n=i.length>1&&void 0!==i[1]?i[1]:{}).headers=n.headers||{},n.headers["X-WP-Nonce"]=window.wpmudevDriveTest.nonce,e.n=1,fetch(t,n);case 1:if((r=e.v).ok){e.n=3;break}return e.n=2,r.text().catch(function(){return null});case 2:throw o=e.v,new Error(o||"".concat(r.status," ").concat(r.statusText));case 3:return e.a(2,r.json())}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return m(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,c=0,u=e,p.n=n,i}};function d(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];n>3?(o=m===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),c=s,u=m;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(m(t={},r,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,m(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,m(f,"constructor",l),m(l,"constructor",u),u.displayName="GeneratorFunction",m(l,o,"GeneratorFunction"),m(f),m(f,o,"Generator"),m(f,r,function(){return this}),m(f,"toString",function(){return"[object Generator]"}),(d=function(){return{w:a,m:p}})()}function m(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}m=function(e,t,n,r){function a(t,n){m(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},m(e,t,n,r)}function v(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function y(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,c,"next",e)}function c(e){v(a,r,o,i,c,"throw",e)}i(void 0)})}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w="/wp-json/";const h=function(n){var o=n.showNotice,a=n.setHasCredentials,i=b((0,e.useState)({clientId:"",clientSecret:""}),2),c=i[0],l=i[1],s=b((0,e.useState)(!window.wpmudevDriveTest.hasCredentials),2),p=s[0],m=s[1],v=b((0,e.useState)(Boolean(window.wpmudevDriveTest.authStatus)),2),g=v[0],h=(v[1],b((0,e.useState)(!1),2)),E=h[0],_=h[1];(0,e.useEffect)(function(){window.wpmudevDriveTest.credentials&&l(window.wpmudevDriveTest.credentials)},[]);var S=function(){var e=y(d().m(function e(){var n,r,i;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return _(!0),e.p=1,n={client_id:c.clientId,client_secret:c.clientSecret},e.n=2,u(w+window.wpmudevDriveTest.restEndpointSave,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:if(!(r=e.v)||!1===r.success){e.n=3;break}a(!0),m(!1),o((0,t.__)("Credentials saved. You can now authenticate.","wpmudev-plugin-test"),"success"),e.n=4;break;case 3:throw new Error(r.message||"Unknown error");case 4:e.n=6;break;case 5:e.p=5,i=e.v,o("".concat((0,t.__)("Failed to save credentials:","wpmudev-plugin-test")," ").concat(i.message),"error");case 6:return e.p=6,_(!1),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=y(d().m(function e(){var n,r;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return _(!0),e.p=1,e.n=2,u(w+window.wpmudevDriveTest.restEndpointAuth,{method:"POST"});case 2:if(null==(n=e.v)||!n.auth_url){e.n=3;break}return window.location.href=n.auth_url,e.a(2);case 3:throw new Error((null==n?void 0:n.message)||"Missing auth_url");case 4:e.p=4,r=e.v,o("".concat((0,t.__)("Authentication failed:","wpmudev-plugin-test")," ").concat(r.message),"error");case 5:return e.p=5,_(!1),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}));return function(){return e.apply(this,arguments)}}();return p?React.createElement("div",{className:"sui-box"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Set Google Drive Credentials","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-body"},React.createElement(r.TextControl,{label:(0,t.__)("Client ID","wpmudev-plugin-test"),value:c.clientId,onChange:function(e){return l(f(f({},c),{},{clientId:e}))},help:(0,t.createInterpolateElement)((0,t.__)("You can get Client ID from <a>Google Cloud Console</a>. Make sure to enable Google Drive API.","wpmudev-plugin-test"),{a:React.createElement("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer"})})}),React.createElement(r.TextControl,{label:(0,t.__)("Client Secret","wpmudev-plugin-test"),type:"password",value:c.clientSecret,onChange:function(e){return l(f(f({},c),{},{clientSecret:e}))},help:(0,t.createInterpolateElement)((0,t.__)("You can get Client Secret from <a>Google Cloud Console</a>.","wpmudev-plugin-test"),{a:React.createElement("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer"})})}),React.createElement("p",null,React.createElement("strong",null,(0,t.__)("Required scopes for Google Drive API:","wpmudev-plugin-test"))),React.createElement("ul",null,React.createElement("li",null,"https://www.googleapis.com/auth/drive.file"),React.createElement("li",null,"https://www.googleapis.com/auth/drive.readonly"))),React.createElement("div",{className:"sui-box-footer"},React.createElement("div",{className:"sui-actions-right"},React.createElement(r.Button,{variant:"primary",onClick:S,disabled:E},E?React.createElement(r.Spinner,null):(0,t.__)("Save Credentials","wpmudev-plugin-test"))))):g?null:React.createElement("div",{className:"sui-box"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Authenticate with Google Drive","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-body"},React.createElement("p",null,(0,t.__)("Please authenticate with Google Drive to proceed with the test.","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-footer"},React.createElement("div",{className:"sui-actions-left"},React.createElement(r.Button,{variant:"secondary",onClick:function(){return m(!0)}},(0,t.__)("Change Credentials","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-actions-right"},React.createElement(r.Button,{variant:"primary",onClick:O,disabled:E},E?React.createElement(r.Spinner,null):(0,t.__)("Authenticate with Google Drive","wpmudev-plugin-test")))))};function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function _(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return S(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,c=0,u=e,p.n=n,i}};function d(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];n>3?(o=m===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),c=s,u=m;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(S(t={},r,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,S(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,S(f,"constructor",l),S(l,"constructor",u),u.displayName="GeneratorFunction",S(l,o,"GeneratorFunction"),S(f),S(f,o,"Generator"),S(f,r,function(){return this}),S(f,"toString",function(){return"[object Generator]"}),(_=function(){return{w:a,m:p}})()}function S(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}S=function(e,t,n,r){function a(t,n){S(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},S(e,t,n,r)}function O(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){N(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function N(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const x=function(n){var o=n.showNotice,a=n.onUploadComplete,i=(0,e.useRef)(null),c=P((0,e.useState)([]),2),u=c[0],l=c[1],s=P((0,e.useState)(!1),2),f=s[0],p=s[1],d=P((0,e.useState)(!1),2),m=d[0],v=d[1],y=P((0,e.useState)("sequential"),2),b=y[0],g=y[1],w=function(e){var t=Array.from(e||[]).map(function(e){return{file:e,progress:0,status:"pending",message:""}});l(t)},h=function(e,n){return new Promise(function(r,o){var a=new XMLHttpRequest,i=new FormData;i.append("file",e.file),a.open("POST","/wp-json/"+window.wpmudevDriveTest.restEndpointUpload),a.setRequestHeader("X-WP-Nonce",window.wpmudevDriveTest.nonce),a.upload.onprogress=function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);l(function(e){var r=T(e);return r[n]&&(r[n]=j(j({},r[n]),{},{progress:t,status:"uploading"})),r})}},a.onload=function(){if(a.status>=200&&a.status<300)try{var e,i=JSON.parse(a.responseText),c=Array.isArray(null==i?void 0:i.files)?i.files[0]:null!==(e=null==i?void 0:i.file)&&void 0!==e?e:null;l(function(e){var r=T(e);return r[n]=j(j({},r[n]),{},{progress:100,status:c&&(c.id||c.success)?"done":"error",message:null!=c&&c.name?(0,t.__)("Uploaded","wpmudev-plugin-test"):(null==i?void 0:i.message)||""}),r}),r(i)}catch(e){l(function(t){var r=T(t);return r[n]=j(j({},r[n]),{},{status:"error",message:e.message}),r}),o(e)}else{var u=a.statusText||"Upload failed";l(function(e){var t=T(e);return t[n]=j(j({},t[n]),{},{status:"error",message:u}),t}),o(new Error(u))}},a.onerror=function(){l(function(e){var t=T(e);return t[n]=j(j({},t[n]),{},{status:"error",message:"Network error"}),t}),o(new Error("Network error during upload"))},a.send(i)})},E=function(){var e,n=(e=_().m(function e(){var n;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(u.length){e.n=1;break}return o((0,t.__)("Please select file(s) to upload.","wpmudev-plugin-test"),"error"),e.a(2);case 1:if(p(!0),"sequential"!==b){e.n=8;break}n=0;case 2:if(!(n<u.length)){e.n=7;break}return e.p=3,e.n=4,h(u[n],n);case 4:e.n=6;break;case 5:e.p=5,e.v;case 6:n++,e.n=2;break;case 7:e.n=9;break;case 8:return e.n=9,Promise.all(u.map(function(e,t){return h(e,t).catch(function(){return null})}));case 9:p(!1),i.current&&(i.current.value=""),o((0,t.__)("Upload complete","wpmudev-plugin-test"),"success"),a&&a();case 10:return e.a(2)}},e,null,[[3,5]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){O(a,r,o,i,c,"next",e)}function c(e){O(a,r,o,i,c,"throw",e)}i(void 0)})});return function(){return n.apply(this,arguments)}}();return React.createElement("div",{className:"sui-box"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Upload Files to Drive","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-body drive-drop-zone ".concat(m?"drag-over":""),onDragOver:function(e){e.preventDefault(),v(!0)},onDragLeave:function(){return v(!1)},onDrop:function(e){e.preventDefault(),v(!1),e.dataTransfer.files.length&&w(e.dataTransfer.files)}},React.createElement("p",null,(0,t.__)("Drag & drop files here or use the picker below:","wpmudev-plugin-test")),React.createElement("input",{ref:i,type:"file",multiple:!0,disabled:f,"aria-label":(0,t.__)("Select file(s) to upload","wpmudev-plugin-test"),onChange:function(e){return w(e.target.files)},className:"drive-file-input"}),u.length>0&&React.createElement("div",{className:"upload-file-list",style:{marginTop:10}},u.map(function(e,t){return React.createElement("div",{key:t,className:"upload-file-row"},React.createElement("strong",null,e.file.name),React.createElement("div",null,React.createElement("small",null,function(e){if(!e&&0!==e)return"—";for(var t=["B","KB","MB","GB","TB"],n=0,r=Number(e);r>=1024&&n<t.length-1;)r/=1024,n++;return"".concat(Math.round(10*r)/10," ").concat(t[n])}(e.file.size)," — ",e.status),"uploading"===e.status&&React.createElement(r.ProgressBar,{value:e.progress,label:"".concat(e.progress,"%")}),"error"===e.status&&React.createElement("div",{className:"upload-error"},e.message)))}))),React.createElement("div",{className:"sui-box-footer"},React.createElement("div",{className:"sui-actions-left"},React.createElement(r.Button,{className:"btn-clear",variant:"secondary",onClick:function(){i.current&&(i.current.value=""),l([])},disabled:f||!u.length},(0,t.__)("Clear","wpmudev-plugin-test")),React.createElement(r.ToggleControl,{label:(0,t.__)("Upload Mode","wpmudev-plugin-test"),help:"sequential"===b?(0,t.__)("Currently sequential (one by one)","wpmudev-plugin-test"):(0,t.__)("Currently parallel (all at once)","wpmudev-plugin-test"),checked:"parallel"===b,onChange:function(e){return g(e?"parallel":"sequential")}})),React.createElement("div",{className:"sui-actions-right"},React.createElement(r.Button,{className:"btn-upload",variant:"primary",onClick:E,disabled:f||!u.length},f?React.createElement(r.Spinner,null):(0,t.__)("Upload Files","wpmudev-plugin-test")),React.createElement("span",{className:"upload-mode-badge ".concat(b)},"sequential"===b?(0,t.__)("Sequential","wpmudev-plugin-test"):(0,t.__)("Parallel","wpmudev-plugin-test")))))};function C(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return A(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,c=0,u=e,p.n=n,i}};function d(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];n>3?(o=m===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),c=s,u=m;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(A(t={},r,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,A(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,A(f,"constructor",l),A(l,"constructor",u),u.displayName="GeneratorFunction",A(l,o,"GeneratorFunction"),A(f),A(f,o,"Generator"),A(f,r,function(){return this}),A(f,"toString",function(){return"[object Generator]"}),(C=function(){return{w:a,m:p}})()}function A(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}A=function(e,t,n,r){function a(t,n){A(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},A(e,t,n,r)}function G(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const U=function(n){var o=n.showNotice,a=n.onFolderCreated,i=F((0,e.useState)(""),2),c=i[0],l=i[1],s=F((0,e.useState)(!1),2),f=s[0],p=s[1],d=function(){var e,n=(e=C().m(function e(){var n,r,i;return C().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=c.trim()){e.n=1;break}return e.a(2);case 1:return p(!0),e.p=2,e.n=3,u("/wp-json/"+window.wpmudevDriveTest.restEndpointCreate,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n})});case 3:if(null==(r=e.v)||!r.success){e.n=4;break}l(""),o((0,t.__)("Folder created successfully.","wpmudev-plugin-test"),"success"),a&&a(),e.n=5;break;case 4:throw new Error((null==r?void 0:r.message)||"Create failed");case 5:e.n=7;break;case 6:e.p=6,i=e.v,o("".concat((0,t.__)("Create folder error:","wpmudev-plugin-test")," ").concat(i.message),"error");case 7:return e.p=7,p(!1),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){G(a,r,o,i,c,"next",e)}function c(e){G(a,r,o,i,c,"throw",e)}i(void 0)})});return function(){return n.apply(this,arguments)}}();return React.createElement("div",{className:"sui-box"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Create New Folder","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-body gdrive-inline-field"},React.createElement(r.TextControl,{label:(0,t.__)("Folder Name","wpmudev-plugin-test"),value:c,onChange:l,placeholder:(0,t.__)("Enter folder name","wpmudev-plugin-test")})),React.createElement("div",{className:"sui-box-footer"},React.createElement("div",{className:"sui-actions-right"},React.createElement(r.Button,{variant:"secondary",onClick:d,disabled:f||!c.trim()},f?React.createElement(r.Spinner,null):(0,t.__)("Create Folder","wpmudev-plugin-test")))))};function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function M(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||X(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return q(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,c=0,u=e,p.n=n,i}};function d(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];n>3?(o=m===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),c=s,u=m;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(q(t={},r,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,q(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,q(f,"constructor",l),q(l,"constructor",u),u.displayName="GeneratorFunction",q(l,o,"GeneratorFunction"),q(f),q(f,o,"Generator"),q(f,r,function(){return this}),q(f,"toString",function(){return"[object Generator]"}),(L=function(){return{w:a,m:p}})()}function q(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}q=function(e,t,n,r){function a(t,n){q(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},q(e,t,n,r)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function J(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Y(a,r,o,i,c,"next",e)}function c(e){Y(a,r,o,i,c,"throw",e)}i(void 0)})}}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||X(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){if(e){if("string"==typeof e)return K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var W="/wp-json/";const Q=function(n){var o=n.showNotice,a=n.refreshTrigger,i=V((0,e.useState)([]),2),c=i[0],l=i[1],s=V((0,e.useState)(""),2),f=s[0],p=s[1],d=V((0,e.useState)(""),2),m=d[0],v=d[1],y=V((0,e.useState)([]),2),b=y[0],g=y[1],w=V((0,e.useState)({}),2),h=w[0],E=w[1],_=V((0,e.useState)(!1),2),S=_[0],O=_[1],R=V((0,e.useState)(null),2),j=R[0],N=R[1],T=V((0,e.useState)(null),2),P=T[0],k=T[1],D=V((0,e.useState)(1),2),x=D[0],C=D[1],A=function(){var e=J(L().m(function e(){var n,r,a,i,c=arguments;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=c.length>0&&void 0!==c[0]?c[0]:"",r=c.length>1&&void 0!==c[1]?c[1]:1,c.length>2&&void 0!==c[2]&&c[2]||!h[n]){e.n=1;break}return l(h[n].files),v(h[n].nextPageToken||""),p(n),C(r),e.a(2);case 1:return O(!0),e.p=2,e.n=3,u(W+window.wpmudevDriveTest.restEndpointFiles+"?per_page=12".concat(n?"&pageToken=".concat(n):""));case 3:null!=(a=e.v)&&a.files?(l(a.files),v(a.nextPageToken||""),p(n),C(r),E(function(e){var t=H(H({},e),{},$({},n,{files:a.files,nextPageToken:a.nextPageToken})),r=Object.keys(t);return r.length>5&&delete t[r[0]],t})):(l([]),v("")),e.n=5;break;case 4:e.p=4,i=e.v,o("".concat((0,t.__)("Failed to load files:","wpmudev-plugin-test")," ").concat(i.message),"error");case 5:return e.p=5,O(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),G=function(){var e=J(L().m(function e(n,r){var a,i,c,l,s,f,p;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return N(n),e.p=1,e.n=2,u(W+window.wpmudevDriveTest.restEndpointDownload+"?file_id=".concat(encodeURIComponent(n)));case 2:if(null==(a=e.v)||!a.success||!a.content){e.n=3;break}i=atob(a.content),c=Array.from(i).map(function(e){return e.charCodeAt(0)}),l=new Blob([new Uint8Array(c)],{type:a.mimeType||"application/octet-stream"}),s=URL.createObjectURL(l),(f=document.createElement("a")).href=s,f.download=a.filename||r||"download",document.body.appendChild(f),f.click(),f.remove(),URL.revokeObjectURL(s),o((0,t.__)("Download ready","wpmudev-plugin-test"),"success"),e.n=4;break;case 3:throw new Error((null==a?void 0:a.message)||"Download failed");case 4:e.n=6;break;case 5:e.p=5,p=e.v,o("".concat((0,t.__)("Download error:","wpmudev-plugin-test")," ").concat(p.message),"error");case 6:return e.p=6,N(null),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=J(L().m(function e(n,r){var a,i;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if(window.confirm("".concat((0,t.__)("Delete","wpmudev-plugin-test"),' "').concat(r,'"?'))){e.n=1;break}return e.a(2);case 1:return k(n),e.p=2,e.n=3,u(W+window.wpmudevDriveTest.restEndpointDelete+"?file_id=".concat(encodeURIComponent(n)),{method:"DELETE"});case 3:if(null==(a=e.v)||!a.success){e.n=5;break}return l(function(e){return e.filter(function(e){return e.id!==n})}),o((0,t.__)("File deleted successfully","wpmudev-plugin-test"),"success"),E({}),g([]),C(1),e.n=4,A(f,x,!0);case 4:e.n=6;break;case 5:throw new Error((null==a?void 0:a.message)||"Delete failed");case 6:e.n=8;break;case 7:e.p=7,i=e.v,o("".concat((0,t.__)("Delete error:","wpmudev-plugin-test")," ").concat(i.message),"error");case 8:return e.p=8,k(null),e.f(8);case 9:return e.a(2)}},e,null,[[2,7,8,9]])}));return function(t,n){return e.apply(this,arguments)}}();return(0,e.useEffect)(function(){A("",1)},[]),(0,e.useEffect)(function(){a&&(E({}),g([]),C(1),A("",1,!0))},[a]),React.createElement("div",{className:"sui-box"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Your Drive Files","wpmudev-plugin-test")),React.createElement("div",{className:"sui-actions-right"},React.createElement(r.Button,{variant:"secondary",onClick:function(){E({}),g([]),C(1),A("",1,!0)},disabled:S},S?React.createElement(r.Spinner,null):(0,t.__)("Refresh Files","wpmudev-plugin-test")))),React.createElement("div",{className:"sui-box-body"},React.createElement(r.Notice,{status:"warning",isDismissible:!1},(0,t.__)("Only files created by this app can be deleted. Other files are read‑only due to Google Drive permissions.","wpmudev-plugin-test")),c.length?React.createElement(React.Fragment,null,React.createElement("div",{className:"drive-files-grid"},c.map(function(e){return React.createElement("div",{className:"drive-file-item",key:e.id},React.createElement("div",{className:"file-info"},React.createElement("strong",null,e.name),React.createElement("small",null,e.size?"".concat((e.size/1024).toFixed(1)," KB"):"—"," ","•"," ",e.modifiedTime?new Date(e.modifiedTime).toLocaleString():"—")),React.createElement("div",{className:"file-actions"},"application/vnd.google-apps.folder"!==e.mimeType&&React.createElement(r.Button,{className:"btn-download",variant:"secondary",onClick:function(){return G(e.id,e.name)},disabled:j===e.id},j===e.id?React.createElement(r.Spinner,null):(0,t.__)("Download","wpmudev-plugin-test")),React.createElement(r.Button,{className:"btn-delete",variant:"secondary",isDestructive:!0,onClick:function(){return F(e.id,e.name)},disabled:P===e.id||!e.canDelete,title:e.canDelete?void 0:(0,t.__)("This file cannot be deleted due to limited permissions","wpmudev-plugin-test")},P===e.id?React.createElement(r.Spinner,null):(0,t.__)("Delete","wpmudev-plugin-test")),e.webViewLink&&React.createElement(r.Button,{className:"btn-view-in-drive",variant:"link",size:"small",href:e.webViewLink,target:"_blank",rel:"noopener noreferrer"},(0,t.__)("View in Drive","wpmudev-plugin-test"))))})),React.createElement("div",{className:"drive-pagination"},React.createElement(r.Button,{className:"btn-prev",variant:"secondary",onClick:function(){if(b.length>0){var e=M(b),t=e.pop();g(e),A(t,x-1)}},disabled:x<=1||S},(0,t.__)("Previous","wpmudev-plugin-test")),React.createElement(r.Button,{className:"btn-next",variant:"secondary",onClick:function(){m&&(g([].concat(M(b),[f])),A(m,x+1))},disabled:!m||S},(0,t.__)("Next","wpmudev-plugin-test")),React.createElement("span",{className:"drive-pagination-page"},"".concat((0,t.__)("Page","wpmudev-plugin-test")," ").concat(x)))):S?React.createElement("div",{className:"drive-loading"},React.createElement(r.Spinner,null),React.createElement("p",null,(0,t.__)("Loading files...","wpmudev-plugin-test"))):React.createElement("div",{className:"sui-box-settings-row"},React.createElement("p",null,(0,t.__)("No files found. Upload one to get started.","wpmudev-plugin-test")),React.createElement(r.Button,{className:"btn-upload",variant:"primary",onClick:function(){var e;return null===(e=document.querySelector(".drive-file-input"))||void 0===e?void 0:e.click()}},(0,t.__)("Upload File","wpmudev-plugin-test")))),S&&c.length>0&&React.createElement("div",{className:"drive-loading-more"},React.createElement(r.Spinner,null),React.createElement("p",null,(0,t.__)("Loading more files...","wpmudev-plugin-test"))))};function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const te=function(){var t=Z((0,e.useState)(null),2),r=t[0],a=t[1],i=Z((0,e.useState)(Boolean(window.wpmudevDriveTest.hasCredentials)),2),c=i[0],u=i[1],l=Z((0,e.useState)(0),2),s=l[0],f=l[1],p=function(e){a({message:e,status:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout(function(){return a(null)},7e3)},d=function(){f(function(e){return e+1})};return React.createElement(n,null,React.createElement("div",{className:"sui-header"},React.createElement("h1",{className:"sui-header-title"},"Google Drive Test"),React.createElement("p",{className:"sui-description"},"Test Google Drive API integration for applicant assessment")),React.createElement(o,{notice:r,onDismiss:function(){return a(null)}}),React.createElement(h,{showNotice:p,setHasCredentials:u}),c&&React.createElement(React.Fragment,null,React.createElement(x,{showNotice:p,onUploadComplete:d}),React.createElement(U,{showNotice:p,onFolderCreated:d}),React.createElement(Q,{showNotice:p,refreshTrigger:s})))};var ne=document.getElementById(window.wpmudevDriveTest.dom_element_id);if(ne)try{e.createRoot?(0,e.createRoot)(ne).render(React.createElement(e.StrictMode,null,React.createElement(te,null))):(0,e.render)(React.createElement(e.StrictMode,null,React.createElement(te,null)),ne)}catch(e){console.error("DriveApp critical render error:",e),ne.innerHTML='\n\t\t\t<div class="sui-notice sui-notice-error">\n\t\t\t\t<p>Failed to initialize Google Drive UI: '.concat(e.message,"</p>\n\t\t\t</div>\n\t\t")}else console.error("DriveApp: Root DOM element not found:",window.wpmudevDriveTest.dom_element_id)})();
//# sourceMappingURL=drivetestpage.min.js.map
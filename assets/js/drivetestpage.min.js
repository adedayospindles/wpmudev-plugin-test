(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n;const r=function(e){var r=e.children;try{return r}catch(e){return console.error("DriveApp error boundary caught:",e),React.createElement("div",{className:"sui-box sui-box-error"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Something went wrong","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-body"},React.createElement("p",null,(0,t.__)("An unexpected error occurred in the Google Drive interface. Please refresh the page or try again later.","wpmudev-plugin-test"))))}},n=window.wp.components;const o=function(e){var t=e.notice,r=e.onDismiss;return null!=t&&t.message?React.createElement(n.Notice,{status:"error"===t.status?"error":"success",isDismissible:!0,onRemove:r},t.message):null};function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function c(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,s=Object.create(c.prototype);return i(s,"_invoke",function(r,n,o){var a,i,c,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return a=t,i=0,c=e,p.n=r,u}};function d(r,n){for(i=r,c=n,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];r>3?(o=m===n)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=r<2&&d<a[1])?(i=0,p.v=n,p.n=a[1]):d<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,p.n=m,i=0))}if(o||r>1)return u;throw f=!0,n}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),i=s,c=m;(t=i<2?e:c)||!f;){a||(i?i<3?(i>1&&(p.n=-1),d(i,c)):p.n=c:p.v=c);try{if(l=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=p.n<0)?c:r.call(n,p))!==u)break}catch(t){a=e,i=1,c=t}finally{l=1}}return{value:t,done:f}}}(r,o,a),!0),s}var u={};function l(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][n]?t(t([][n]())):(i(t={},n,function(){return this}),t),d=f.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,i(d,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,o,"GeneratorFunction"),i(d),i(d,o,"Generator"),i(d,n,function(){return this}),i(d,"toString",function(){return"[object Generator]"}),(a=function(){return{w:c,m}})()}function i(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,t,r,n){function a(t,r){i(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},i(e,t,r,n)}function c(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var u=function(){var e,t=(e=a().m(function e(t){var r,n,o,i=arguments;return a().w(function(e){for(;;)switch(e.n){case 0:return(r=i.length>1&&void 0!==i[1]?i[1]:{}).headers=r.headers||{},r.headers["X-WP-Nonce"]=window.wpmudevDriveTest.nonce,e.n=1,fetch(t,r);case 1:if((n=e.v).ok){e.n=3;break}return e.n=2,n.text().catch(function(){return null});case 2:throw o=e.v,new Error(o||"".concat(n.status," ").concat(n.statusText));case 3:return e.a(2,n.json())}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,u,"next",e)}function u(e){c(a,n,o,i,u,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var u=n&&n.prototype instanceof c?n:c,l=Object.create(u.prototype);return m(l,"_invoke",function(r,n,o){var a,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return a=t,c=0,u=e,p.n=r,i}};function d(r,n){for(c=r,u=n,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];r>3?(o=m===n)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=r<2&&d<a[1])?(c=0,p.v=n,p.n=a[1]):d<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,p.n=m,c=0))}if(o||r>1)return i;throw f=!0,n}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),c=s,u=m;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(m(t={},n,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,m(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,m(f,"constructor",l),m(l,"constructor",u),u.displayName="GeneratorFunction",m(l,o,"GeneratorFunction"),m(f),m(f,o,"Generator"),m(f,n,function(){return this}),m(f,"toString",function(){return"[object Generator]"}),(d=function(){return{w:a,m:p}})()}function m(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}m=function(e,t,r,n){function a(t,r){m(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},m(e,t,r,n)}function v(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){v(a,n,o,i,c,"next",e)}function c(e){v(a,n,o,i,c,"throw",e)}i(void 0)})}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h="/wp-json/";const w=function(r){var o=r.showNotice,a=r.setHasCredentials,i=b((0,e.useState)({clientId:"",clientSecret:""}),2),c=i[0],l=i[1],s=b((0,e.useState)(!window.wpmudevDriveTest.hasCredentials),2),p=s[0],m=s[1],v=b((0,e.useState)(Boolean(window.wpmudevDriveTest.authStatus)),2),g=v[0],w=(v[1],b((0,e.useState)(!1),2)),E=w[0],_=w[1];(0,e.useEffect)(function(){window.wpmudevDriveTest.credentials&&l(window.wpmudevDriveTest.credentials)},[]);var S=function(){var e=y(d().m(function e(){var r,n,i;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return _(!0),e.p=1,r={client_id:c.clientId,client_secret:c.clientSecret},e.n=2,u(h+window.wpmudevDriveTest.restEndpointSave,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 2:if(!(n=e.v)||!1===n.success){e.n=3;break}a(!0),m(!1),o((0,t.__)("Credentials saved. You can now authenticate.","wpmudev-plugin-test"),"success"),e.n=4;break;case 3:throw new Error(n.message||"Unknown error");case 4:e.n=6;break;case 5:e.p=5,i=e.v,o("".concat((0,t.__)("Failed to save credentials:","wpmudev-plugin-test")," ").concat(i.message),"error");case 6:return e.p=6,_(!1),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=y(d().m(function e(){var r,n;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return _(!0),e.p=1,e.n=2,u(h+window.wpmudevDriveTest.restEndpointAuth,{method:"POST"});case 2:if(null==(r=e.v)||!r.auth_url){e.n=3;break}return window.location.href=r.auth_url,e.a(2);case 3:throw new Error((null==r?void 0:r.message)||"Missing auth_url");case 4:e.p=4,n=e.v,o("".concat((0,t.__)("Authentication failed:","wpmudev-plugin-test")," ").concat(n.message),"error");case 5:return e.p=5,_(!1),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}));return function(){return e.apply(this,arguments)}}();return p?React.createElement("div",{className:"sui-box"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Set Google Drive Credentials","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-body"},React.createElement(n.TextControl,{help:(0,t.createInterpolateElement)((0,t.__)("You can get Client ID from <a>Google Cloud Console</a>. Make sure to enable Google Drive API.","wpmudev-plugin-test"),{a:React.createElement("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer"})}),label:(0,t.__)("Client ID","wpmudev-plugin-test"),value:c.clientId,onChange:function(e){return l(f(f({},c),{},{clientId:e}))}}),React.createElement(n.TextControl,{help:(0,t.createInterpolateElement)((0,t.__)("You can get Client Secret from <a>Google Cloud Console</a>.","wpmudev-plugin-test"),{a:React.createElement("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer"})}),label:(0,t.__)("Client Secret","wpmudev-plugin-test"),value:c.clientSecret,onChange:function(e){return l(f(f({},c),{},{clientSecret:e}))},type:"password"}),React.createElement("p",null,React.createElement("strong",null,(0,t.__)("Required scopes for Google Drive API:","wpmudev-plugin-test"))),React.createElement("ul",null,React.createElement("li",null,"https://www.googleapis.com/auth/drive.file"),React.createElement("li",null,"https://www.googleapis.com/auth/drive.readonly"))),React.createElement("div",{className:"sui-box-footer"},React.createElement("div",{className:"sui-actions-right"},React.createElement(n.Button,{variant:"primary",onClick:S,disabled:E},E?React.createElement(n.Spinner,null):(0,t.__)("Save Credentials","wpmudev-plugin-test"))))):g?null:React.createElement("div",{className:"sui-box"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Authenticate with Google Drive","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-body"},React.createElement("p",null,(0,t.__)("Please authenticate with Google Drive to proceed with the test.","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-footer"},React.createElement("div",{className:"sui-actions-left"},React.createElement(n.Button,{variant:"secondary",onClick:function(){return m(!0)}},(0,t.__)("Change Credentials","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-actions-right"},React.createElement(n.Button,{variant:"primary",onClick:O,disabled:E},E?React.createElement(n.Spinner,null):(0,t.__)("Authenticate with Google Drive","wpmudev-plugin-test")))))};function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function _(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var u=n&&n.prototype instanceof c?n:c,l=Object.create(u.prototype);return S(l,"_invoke",function(r,n,o){var a,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return a=t,c=0,u=e,p.n=r,i}};function d(r,n){for(c=r,u=n,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];r>3?(o=m===n)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=r<2&&d<a[1])?(c=0,p.v=n,p.n=a[1]):d<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,p.n=m,c=0))}if(o||r>1)return i;throw f=!0,n}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),c=s,u=m;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(S(t={},n,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,S(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,S(f,"constructor",l),S(l,"constructor",u),u.displayName="GeneratorFunction",S(l,o,"GeneratorFunction"),S(f),S(f,o,"Generator"),S(f,n,function(){return this}),S(f,"toString",function(){return"[object Generator]"}),(_=function(){return{w:a,m:p}})()}function S(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}S=function(e,t,r,n){function a(t,r){S(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},S(e,t,r,n)}function O(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){T(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function T(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return D(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const x=function(r){var o=r.showNotice,a=r.loadFiles,i=(0,e.useRef)(null),c=N((0,e.useState)([]),2),u=c[0],l=c[1],s=N((0,e.useState)(!1),2),f=s[0],p=s[1],d=N((0,e.useState)(!1),2),m=d[0],v=d[1],y=N((0,e.useState)("sequential"),2),b=y[0],g=y[1],h=function(e){var t=Array.from(e||[]).map(function(e){return{file:e,progress:0,status:"pending",message:""}});l(t)},w=function(e,r){return new Promise(function(n,o){var a=new XMLHttpRequest,i=new FormData;i.append("file",e.file),a.open("POST","/wp-json/"+window.wpmudevDriveTest.restEndpointUpload),a.setRequestHeader("X-WP-Nonce",window.wpmudevDriveTest.nonce),a.upload.onprogress=function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);l(function(e){var n=P(e);return n[r]&&(n[r]=j(j({},n[r]),{},{progress:t,status:"uploading"})),n})}},a.onload=function(){if(a.status>=200&&a.status<300)try{var e,i=JSON.parse(a.responseText),c=Array.isArray(null==i?void 0:i.files)?i.files[0]:null!==(e=null==i?void 0:i.file)&&void 0!==e?e:null;l(function(e){var n=P(e);return n[r]=j(j({},n[r]),{},{progress:100,status:c&&(c.id||c.success)?"done":"error",message:null!=c&&c.name?(0,t.__)("Uploaded","wpmudev-plugin-test"):(null==i?void 0:i.message)||""}),n}),n(i)}catch(e){l(function(t){var n=P(t);return n[r]=j(j({},n[r]),{},{status:"error",message:e.message}),n}),o(e)}else{var u=a.statusText||"Upload failed";l(function(e){var t=P(e);return t[r]=j(j({},t[r]),{},{status:"error",message:u}),t}),o(new Error(u))}},a.onerror=function(){l(function(e){var t=P(e);return t[r]=j(j({},t[r]),{},{status:"error",message:"Network error"}),t}),o(new Error("Network error during upload"))},a.send(i)})},E=function(){var e,r=(e=_().m(function e(){var r;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(u.length){e.n=1;break}return o((0,t.__)("Please select file(s) to upload.","wpmudev-plugin-test"),"error"),e.a(2);case 1:if(p(!0),"sequential"!==b){e.n=8;break}r=0;case 2:if(!(r<u.length)){e.n=7;break}return e.p=3,e.n=4,w(u[r],r);case 4:e.n=6;break;case 5:e.p=5,e.v;case 6:r++,e.n=2;break;case 7:e.n=9;break;case 8:return e.n=9,Promise.all(u.map(function(e,t){return w(e,t).catch(function(){return null})}));case 9:p(!1),i.current&&(i.current.value=""),setPageCache({}),setPrevTokens([]),setPage(1),a("",1);case 10:return e.a(2)}},e,null,[[3,5]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){O(a,n,o,i,c,"next",e)}function c(e){O(a,n,o,i,c,"throw",e)}i(void 0)})});return function(){return r.apply(this,arguments)}}();return React.createElement("div",{className:"sui-box"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Upload Files to Drive","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-body drive-drop-zone ".concat(m?"drag-over":""),onDragOver:function(e){e.preventDefault(),v(!0)},onDragLeave:function(){return v(!1)},onDrop:function(e){e.preventDefault(),v(!1),e.dataTransfer.files.length&&h(e.dataTransfer.files)}},React.createElement("p",null,(0,t.__)("Drag & drop files here or use the picker below:","wpmudev-plugin-test")),React.createElement("input",{ref:i,type:"file",multiple:!0,disabled:f,"aria-label":(0,t.__)("Select file(s) to upload","wpmudev-plugin-test"),onChange:function(e){return h(e.target.files)},className:"drive-file-input"}),u.length>0&&React.createElement("div",{className:"upload-file-list",style:{marginTop:10}},u.map(function(e,t){return React.createElement("div",{key:t,className:"upload-file-row"},React.createElement("strong",null,e.file.name),React.createElement("div",null,React.createElement("small",null,function(e){if(!e&&0!==e)return"—";for(var t=["B","KB","MB","GB","TB"],r=0,n=Number(e);n>=1024&&r<t.length-1;)n/=1024,r++;return"".concat(Math.round(10*n)/10," ").concat(t[r])}(e.file.size)," — ",e.status),"uploading"===e.status&&React.createElement(n.ProgressBar,{value:e.progress,label:"".concat(e.progress,"%")}),"error"===e.status&&React.createElement("div",{className:"upload-error"},e.message)))}))),React.createElement("div",{className:"sui-box-footer"},React.createElement("div",{className:"sui-actions-left"},React.createElement(n.Button,{variant:"secondary",onClick:function(){i.current&&(i.current.value=""),l([])},disabled:f||!u.length},(0,t.__)("Clear","wpmudev-plugin-test")),React.createElement(n.ToggleControl,{label:(0,t.__)("Upload Mode","wpmudev-plugin-test"),help:"sequential"===b?(0,t.__)("Currently sequential (one by one)","wpmudev-plugin-test"):(0,t.__)("Currently parallel (all at once)","wpmudev-plugin-test"),checked:"parallel"===b,onChange:function(e){return g(e?"parallel":"sequential")}})),React.createElement("div",{className:"sui-actions-right"},React.createElement(n.Button,{variant:"primary",onClick:E,disabled:f||!u.length},f?React.createElement(n.Spinner,null):(0,t.__)("Upload Files","wpmudev-plugin-test")),React.createElement("span",{className:"upload-mode-badge ".concat(b)},"sequential"===b?(0,t.__)("Sequential","wpmudev-plugin-test"):(0,t.__)("Parallel","wpmudev-plugin-test")))))};function C(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var u=n&&n.prototype instanceof c?n:c,l=Object.create(u.prototype);return A(l,"_invoke",function(r,n,o){var a,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return a=t,c=0,u=e,p.n=r,i}};function d(r,n){for(c=r,u=n,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];r>3?(o=m===n)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=r<2&&d<a[1])?(c=0,p.v=n,p.n=a[1]):d<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,p.n=m,c=0))}if(o||r>1)return i;throw f=!0,n}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),c=s,u=m;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(A(t={},n,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,A(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,A(f,"constructor",l),A(l,"constructor",u),u.displayName="GeneratorFunction",A(l,o,"GeneratorFunction"),A(f),A(f,o,"Generator"),A(f,n,function(){return this}),A(f,"toString",function(){return"[object Generator]"}),(C=function(){return{w:a,m:p}})()}function A(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}A=function(e,t,r,n){function a(t,r){A(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},A(e,t,r,n)}function G(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const B=function(r){var o=r.showNotice,a=r.loadFiles,i=F((0,e.useState)(""),2),c=i[0],l=i[1],s=F((0,e.useState)(!1),2),f=s[0],p=s[1],d=function(){var e,r=(e=C().m(function e(){var r,n;return C().w(function(e){for(;;)switch(e.p=e.n){case 0:if(c.trim()){e.n=1;break}return e.a(2);case 1:return p(!0),e.p=2,e.n=3,u("/wp-json/"+window.wpmudevDriveTest.restEndpointCreate,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c.trim()})});case 3:if(null==(r=e.v)||!r.success){e.n=4;break}l(""),o((0,t.__)("Folder created successfully.","wpmudev-plugin-test"),"success"),a(),e.n=5;break;case 4:throw new Error((null==r?void 0:r.message)||"Create failed");case 5:e.n=7;break;case 6:e.p=6,n=e.v,o("".concat((0,t.__)("Create folder error:","wpmudev-plugin-test")," ").concat(n.message),"error");case 7:return e.p=7,p(!1),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){G(a,n,o,i,c,"next",e)}function c(e){G(a,n,o,i,c,"throw",e)}i(void 0)})});return function(){return r.apply(this,arguments)}}();return React.createElement("div",{className:"sui-box"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Create New Folder","wpmudev-plugin-test"))),React.createElement("div",{className:"sui-box-body"},React.createElement(n.TextControl,{label:(0,t.__)("Folder Name","wpmudev-plugin-test"),value:c,onChange:l,placeholder:(0,t.__)("Enter folder name","wpmudev-plugin-test")})),React.createElement("div",{className:"sui-box-footer"},React.createElement("div",{className:"sui-actions-right"},React.createElement(n.Button,{variant:"secondary",onClick:d,disabled:f||!c.trim()},f?React.createElement(n.Spinner,null):(0,t.__)("Create Folder","wpmudev-plugin-test")))))};function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function M(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||X(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var u=n&&n.prototype instanceof c?n:c,l=Object.create(u.prototype);return q(l,"_invoke",function(r,n,o){var a,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return a=t,c=0,u=e,p.n=r,i}};function d(r,n){for(c=r,u=n,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];r>3?(o=m===n)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=r<2&&d<a[1])?(c=0,p.v=n,p.n=a[1]):d<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,p.n=m,c=0))}if(o||r>1)return i;throw f=!0,n}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),c=s,u=m;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(q(t={},n,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,q(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,q(f,"constructor",l),q(l,"constructor",u),u.displayName="GeneratorFunction",q(l,o,"GeneratorFunction"),q(f),q(f,o,"Generator"),q(f,n,function(){return this}),q(f,"toString",function(){return"[object Generator]"}),(L=function(){return{w:a,m:p}})()}function q(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}q=function(e,t,r,n){function a(t,r){q(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},q(e,t,r,n)}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(t){$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function J(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){Y(a,n,o,i,c,"next",e)}function c(e){Y(a,n,o,i,c,"throw",e)}i(void 0)})}}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||X(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){if(e){if("string"==typeof e)return K(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var W="/wp-json/";const Q=function(r){var o=r.showNotice,a=r.refreshTrigger,i=V((0,e.useState)([]),2),c=i[0],l=i[1],s=V((0,e.useState)(""),2),f=s[0],p=s[1],d=V((0,e.useState)(""),2),m=d[0],v=d[1],y=V((0,e.useState)([]),2),b=y[0],g=y[1],h=V((0,e.useState)({}),2),w=h[0],E=h[1],_=V((0,e.useState)(!1),2),S=_[0],O=_[1],R=V((0,e.useState)(null),2),j=R[0],T=R[1],P=V((0,e.useState)(null),2),N=P[0],k=P[1],D=V((0,e.useState)(1),2),x=D[0],C=D[1],A=function(){var e=J(L().m(function e(){var r,n,a,i,c=arguments;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:1,!w[r=c.length>0&&void 0!==c[0]?c[0]:""]){e.n=1;break}return l(w[r].files),v(w[r].nextPageToken||""),p(r),C(n),e.a(2);case 1:return O(!0),e.p=2,e.n=3,u(W+window.wpmudevDriveTest.restEndpointFiles+"?per_page=12".concat(r?"&pageToken=".concat(r):""));case 3:null!=(a=e.v)&&a.files?(l(a.files),v(a.nextPageToken||""),p(r),C(n),E(function(e){var t=H(H({},e),{},$({},r,{files:a.files,nextPageToken:a.nextPageToken})),n=Object.keys(t);return n.length>5&&delete t[n[0]],t})):(l([]),v("")),e.n=5;break;case 4:e.p=4,i=e.v,o("".concat((0,t.__)("Failed to load files:","wpmudev-plugin-test")," ").concat(i.message),"error");case 5:return e.p=5,O(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),G=function(){var e=J(L().m(function e(r,n){var a,i,c,l,s,f,p;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return T(r),e.p=1,e.n=2,u(W+window.wpmudevDriveTest.restEndpointDownload+"?file_id=".concat(encodeURIComponent(r)));case 2:if(null==(a=e.v)||!a.success||!a.content){e.n=3;break}i=atob(a.content),c=Array.from(i).map(function(e){return e.charCodeAt(0)}),l=new Blob([new Uint8Array(c)],{type:a.mimeType||"application/octet-stream"}),s=URL.createObjectURL(l),(f=document.createElement("a")).href=s,f.download=a.filename||n||"download",document.body.appendChild(f),f.click(),f.remove(),URL.revokeObjectURL(s),o((0,t.__)("Download ready","wpmudev-plugin-test"),"success"),e.n=4;break;case 3:throw new Error((null==a?void 0:a.message)||"Download failed");case 4:e.n=6;break;case 5:e.p=5,p=e.v,o("".concat((0,t.__)("Download error:","wpmudev-plugin-test")," ").concat(p.message),"error");case 6:return e.p=6,T(null),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}));return function(t,r){return e.apply(this,arguments)}}(),F=function(){var e=J(L().m(function e(r,n){var a,i;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if(window.confirm("".concat((0,t.__)("Delete","wpmudev-plugin-test"),' "').concat(n,'"?'))){e.n=1;break}return e.a(2);case 1:return k(r),e.p=2,e.n=3,u(W+window.wpmudevDriveTest.restEndpointDelete+"?file_id=".concat(encodeURIComponent(r)),{method:"DELETE"});case 3:if(null==(a=e.v)||!a.success){e.n=4;break}o((0,t.__)("File deleted successfully","wpmudev-plugin-test"),"success"),E({}),g([]),C(1),A(f,x),e.n=5;break;case 4:throw new Error((null==a?void 0:a.message)||"Delete failed");case 5:e.n=7;break;case 6:e.p=6,i=e.v,o("".concat((0,t.__)("Delete error:","wpmudev-plugin-test")," ").concat(i.message),"error");case 7:return e.p=7,k(null),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}));return function(t,r){return e.apply(this,arguments)}}();return(0,e.useEffect)(function(){A("",1)},[]),(0,e.useEffect)(function(){a&&(E({}),g([]),C(1),A("",1))},[a]),React.createElement("div",{className:"sui-box"},React.createElement("div",{className:"sui-box-header"},React.createElement("h2",{className:"sui-box-title"},(0,t.__)("Your Drive Files","wpmudev-plugin-test")),React.createElement("div",{className:"sui-actions-right"},React.createElement(n.Button,{variant:"secondary",onClick:function(){E({}),g([]),C(1),A("",1)},disabled:S},S?React.createElement(n.Spinner,null):(0,t.__)("Refresh Files","wpmudev-plugin-test")))),React.createElement("div",{className:"sui-box-body"},React.createElement(n.Notice,{status:"warning",isDismissible:!1},(0,t.__)("Only files created by this app can be deleted. Other files are read‑only due to Google Drive permissions.","wpmudev-plugin-test")),c.length?React.createElement(React.Fragment,null,React.createElement("div",{className:"drive-files-grid"},c.map(function(e){return React.createElement("div",{className:"drive-file-item",key:e.id},React.createElement("div",{className:"file-info"},React.createElement("strong",null,e.name),React.createElement("small",null,e.size?"".concat((e.size/1024).toFixed(1)," KB"):"—"," ","•"," ",e.modifiedTime?new Date(e.modifiedTime).toLocaleString():"—")),React.createElement("div",{className:"file-actions"},"application/vnd.google-apps.folder"!==e.mimeType&&React.createElement(n.Button,{variant:"secondary",onClick:function(){return G(e.id,e.name)},disabled:j===e.id},j===e.id?React.createElement(n.Spinner,null):(0,t.__)("Download","wpmudev-plugin-test")),React.createElement(n.Button,{variant:"secondary",isDestructive:!0,onClick:function(){return F(e.id,e.name)},disabled:N===e.id||!e.canDelete,title:e.canDelete?void 0:(0,t.__)("This file cannot be deleted due to limited permissions","wpmudev-plugin-test")},N===e.id?React.createElement(n.Spinner,null):(0,t.__)("Delete","wpmudev-plugin-test")),e.webViewLink&&React.createElement(n.Button,{variant:"link",size:"small",href:e.webViewLink,target:"_blank",rel:"noopener noreferrer"},(0,t.__)("View in Drive","wpmudev-plugin-test"))))})),React.createElement("div",{className:"drive-pagination"},React.createElement(n.Button,{variant:"secondary",onClick:function(){if(b.length>0){var e=M(b),t=e.pop();g(e),A(t,x-1)}},disabled:x<=1||S},(0,t.__)("Previous","wpmudev-plugin-test")),React.createElement(n.Button,{variant:"secondary",onClick:function(){m&&(g([].concat(M(b),[f])),A(m,x+1))},disabled:!m||S},(0,t.__)("Next","wpmudev-plugin-test")),React.createElement("span",{className:"drive-pagination-page"},"".concat((0,t.__)("Page","wpmudev-plugin-test")," ").concat(x)))):S?React.createElement("div",{className:"drive-loading"},React.createElement(n.Spinner,null),React.createElement("p",null,(0,t.__)("Loading files...","wpmudev-plugin-test"))):React.createElement("div",{className:"sui-box-settings-row"},React.createElement("p",null,(0,t.__)("No files found. Upload one to get started.","wpmudev-plugin-test")),React.createElement(n.Button,{variant:"primary",onClick:function(){var e;return null===(e=document.querySelector(".drive-file-input"))||void 0===e?void 0:e.click()}},(0,t.__)("Upload File","wpmudev-plugin-test")))),S&&c.length>0&&React.createElement("div",{className:"drive-loading-more"},React.createElement(n.Spinner,null),React.createElement("p",null,(0,t.__)("Loading more files...","wpmudev-plugin-test"))))};function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const te=function(){var t=Z((0,e.useState)(null),2),n=t[0],a=t[1],i=Z((0,e.useState)(Boolean(window.wpmudevDriveTest.hasCredentials)),2),c=i[0],u=i[1],l=function(e){a({message:e,status:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout(function(){return a(null)},7e3)};return React.createElement(r,null,React.createElement("div",{className:"sui-header"},React.createElement("h1",{className:"sui-header-title"},"Google Drive Test"),React.createElement("p",{className:"sui-description"},"Test Google Drive API integration for applicant assessment")),React.createElement(o,{notice:n,onDismiss:function(){return a(null)}}),React.createElement(w,{showNotice:l,setHasCredentials:u}),c&&React.createElement(React.Fragment,null,React.createElement(x,{showNotice:l,loadFiles:function(){return document.dispatchEvent(new Event("loadFiles"))}}),React.createElement(B,{showNotice:l,loadFiles:function(){return document.dispatchEvent(new Event("loadFiles"))}}),React.createElement(Q,{showNotice:l})))};var re=document.getElementById(window.wpmudevDriveTest.dom_element_id);if(re)try{e.createRoot?(0,e.createRoot)(re).render(React.createElement(e.StrictMode,null,React.createElement(te,null))):(0,e.render)(React.createElement(e.StrictMode,null,React.createElement(te,null)),re)}catch(e){console.error("DriveApp critical render error:",e),re.innerHTML='<div class="sui-notice sui-notice-error"><p>Failed to initialize Google Drive UI: '.concat(e.message,"</p></div>")}else console.error("DriveApp: Root DOM element not found:",window.wpmudevDriveTest.dom_element_id)})();
//# sourceMappingURL=drivetestpage.min.js.map